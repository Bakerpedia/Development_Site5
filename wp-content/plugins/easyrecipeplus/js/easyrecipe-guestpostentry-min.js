/*! EasyRecipe Plus 3.3.3077 Copyright (c) 2015 BoxHill LLC */
window.EASYRECIPE=window.EASYRECIPE||{},function(e){function t(t){return e.trim(t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/ /g,"%20"))}function i(e){return e.replace(/%20/g," ").replace(/&quot;/g,'"').replace(/&gt/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&").replace(/%22/g,'"').replace(/%3C/gi,"<").replace(/%3E/gi,">")}function n(e){var i,n,a,l,s;switch(e.target.id){case"btnERGPLCancel":T.dialog($);break;case"btnERGPLAdd":i=t(D.val()),n=t(_.val()),""!==n&&(n=' title="'+n+'"'),a=A.is(":checked")?' target="_blank"':"",s=j||v.selection.getContent(),l='<a href="'+i+'"'+n+a+">"+s+"</a>",Y.isEntryDialog?Y.insertLink(l):v.selection.setContent(l),T.dialog($)}}function a(){var e=v.selection.getNode();"A"===e.tagName.toUpperCase()?(D.val(i(e.href)),_.val(i(e.title)),A.attr("checked","_blank"===e.target),v.selection.select(e),j=e.innerHTML):(D.val("http://"),_.val(""),A.attr("checked",!0),j=!1),T.dialog(B,M,g).dialog(K)}function l(){var t,i,n,a,l,s=v.selection.getNode();if(t=e(".ERGPAlignment input:radio[name=rbERGPAlign]:checked").val(),i=e(".ERGPSize input:radio[name=rbERGPSize]:checked").val(),"full"===i?(n=R.meta.width,a=R.meta.height,l=R.meta.file):(n=R.meta.sizes[i].width,a=R.meta.sizes[i].height,l=R.meta.sizes[i].file),f="aligncenter"===t?'<p style="text-align:center">':"",f+='<img class="'+t+" size-"+i+" wp-image-"+R.id+'"',f+=' title="'+P.val()+'"',f+=' alt="'+C.val()+'"',f+=' width="'+n+'"',f+=' height="'+a+'"',f+=' src="'+R.baseurl+l+'"',f+=" />",f+="aligncenter"===t?"</p>":"",Y.isEntryDialog)Y.insertUploadedImage(null,f);else if("#document"===s.nodeName&&(s=e("body",p)[0]),"BODY"===s.nodeName.toUpperCase())e(s).hasClass("mceContentBody")||(s=e("body",p)[0]),e(s).append("&nbsp;"+f);else{for(;s.parentNode&&"BODY"!==s.parentNode.nodeName.toUpperCase();)s=s.parentNode;s.parentNode?"DIV"===s.nodeName.toUpperCase()||"SPAN"===s.nodeName.toUpperCase()?e(s,p).after(f):e(s,p).before(f):(s=e("body",p)[0],e(s).append(f))}c.dialog("close")}function s(t,i,n){return y=!1,typeof tinyMCE!==J&&tinyMCE.activeEditor&&!tinyMCE.activeEditor.isHidden()&&(y=!0),y?(v=tinyMCE.activeEditor,void(i.editorId===m?(p=e("#"+m+"_ifr").contents(),g=1e4):(p=e("#mce_fullscreen_ifr").contents(),g=200001))):void alert("You must use the Visual Editor to add or update an EasyRecipe")}function r(){var t="html5,flash,silverlight,html4";b.hide(),k.hide(),d.show(),E.show(),x.text(""),P.val(""),C.val(""),G.val(""),c.dialog(B,M,g),c.dialog(K),O.hide(),e("#ERGPplupload").html(""),plupload.VERSION&&plupload.ua&&"1.5.4"==plupload.VERSION&&plupload.ua.gecko&&(t="flash,silverlight,html4"),Q=new plupload.Uploader({runtimes:t,browse_button:"btnERGPSelect",max_file_size:"10mb",container:"easyrecipeUpload",url:ajaxurl,flash_swf_url:Y.wpurl+"/wp-includes/js/plupload/plupload.flash.swf",silverlight_xap_url:Y.wpurl+"/wp-includes/js/plupload/plupload.silverlight.xap",multipart_params:{postID:w,action:"easyrecipeUpload"},filters:[{title:"Image files",extensions:"jpg,gif,png"}]}),Q.init(),Q.bind("FilesAdded",function(e,t){x.text("File: "+t[0].name),F.text(0),u.show(),d.hide(),b.show(),Q.start()}),Q.bind("UploadProgress",function(e,t){F.text(t.percent),u.progressbar("value",t.percent),100===t.percent&&O.show()}),Q.bind("Error",function(e,t){e.refresh()}),Q.bind("FileUploaded",function(t,i,n){var a,l,s,r,o,c;R=e.parseJSON(n.response),E.hide(),k.show(),R.meta.sizes.thumbnail?(a=R.meta.sizes.thumbnail.file,r=R.meta.sizes.thumbnail.width,o=R.meta.sizes.thumbnail.height):(a=R.meta.file,o=R.meta.height,r=R.meta.width),H.attr("src",R.baseurl+a),o=130*o/r,H.css("top",Math.floor((140-o)/2)),R.postID&&e('.ERGuestPost form input[name="postID"]').val(R.postID);for(l in W)W.hasOwnProperty(l)&&(s=W[l],R.meta.sizes[l]?(s.attr(X,!1),s.next("span").text(" ("+R.meta.sizes[l].width+" x "+R.meta.sizes[l].height+")")):(s.attr(X,!0),s.next("span").text("")));W.medium.attr(X)?I.attr(Z,!0):W.medium.attr(Z,!0),L.text(" ("+R.meta.width+" x "+R.meta.height+")"),c=R.meta,e("#divERGPFIName").text(c.file),e("#divERGPFIDim").text(c.width+" x "+c.height),e("#divERGPFISize").text(c.filesize),O.hide()}),Q.refresh()}function o(){var t,i,n,a=!1;t=e("#spnERGPNameErr"),i=e("#spnERGPURLErr"),n=e("#spnERGPEmailErr"),t.text(""),i.text(""),i.text(""),""===e.trim(z.val())&&(t.text("You must enter your name"),a=!0),""===e.trim(q.val())?(n.text("You must enter your email"),a=!0):ee.test(e.trim(q.val()))||(n.text("You must enter a valid email address"),a=!0),""===e.trim(S.val())&&(i.text("You must enter your website URL"),a=!0),a||(U.hide(),N.show())}var c,d,u,h,p,m,f,g,v,y,w,k,E,b,x,R,P,C,G,I,L,T,U,N,z,q,S,D,_,A,j,Y,F,H,O,B="option",M="zIndex",$="close",V="click",J="undefined",K="open",Q=null,W={},X="disabled",Z="checked",ee=/[a-z0-9!#$%&'*+\/=?\^_`{|}~\-]+(?:\.[a-z0-9!#$%&'*+\/=?\^_`{|}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?/i;e(function(){var t;Y=EASYRECIPE,c=e("#easyrecipeUpload"),T=e("#easyrecipeLinks"),c.dialog({autoOpen:!1,width:500,height:600,title:"Upload an image",modal:!0,dialogClass:"easyrecipeUpload",close:function(){e(".easyrecipeUpload").filter(function(){return""===e(this).text()}).remove(),Q&&(Q.destroy(),Q=null)},open:function(){d.show(),u.progressbar("value",0),e(".ui-widget-overlay").wrap('<div class="easyrecipeUI" />')}}),c.parent(".ui-dialog").wrap('<div class="easyrecipeUI" />'),e('input[type="button"]',T).button(),e("#divERGPLBtns").on(V,"input",n),T.dialog({autoOpen:!1,width:480,title:"Insert/edit link",modal:!0,dialogClass:"easyrecipeLinks",close:function(){e(".easyrecipeLinks").filter(function(){return""===e(this).text()}).remove()},open:function(){e(".ui-widget-overlay").wrap('<div class="easyrecipeUI" />')}}),T.parent(".ui-dialog").wrap('<div class="easyrecipeUI" />'),k=e("#divERGPUploaded"),E=e("#divERGPUploadContainer"),b=e("#divERGPUploading"),x=e("#divERGPFile"),P=e("#inpERGPTitle"),C=e("#inpERGPAltText"),G=e("#inpERGPLinkURL"),d=e("#btnERGPSelect").button(),A=e("#cbERGPLTarget"),_=e("#fldERGPLTitle"),D=e("#fldERGPLURL"),N=e("#divERGPPost"),U=e("#divERGPData"),z=e("#fldERGPName"),q=e("#fldERGPEmail"),S=e("#fldERGPURL"),W.thumbnail=e('.ERGPSize input[value="thumbnail"]'),W.medium=e('.ERGPSize input[value="medium"]'),W.large=e('.ERGPSize input[value="large"]'),I=e('.ERGPSize input[value="full"]'),L=I.next("span"),h=e("#btnERGPInsert").button().on(V,l),u=e("#divERGPProgress").progressbar().hide(),e(window).bind("easyrecipeguestimage",r),e(window).bind("guestpostloaded",s),e(window).bind("guestpostlink",a),e(".wp-media-buttons").hide(),w=e("#ERGPpostID").val(),m=e(".wp-editor-wrap").attr("id").replace(/^wp-(.*)-wrap$/gi,"$1"),e(".ERGuestPost .ERGPButton").button(),e("#btnERGPContinue").on(V,o),H=e("#imgERGPThumb"),F=e("#spnERGComplete"),O=e("#divERGPSpinner"),Y.isGuest=!0,Y.doLink=a,Y.doUpload=r,t=e("#inpERGPAuthor").val(),t&&(Y.author='"'+t+'"')})}(jQuery),/*! EasyRecipe Plus 3.3.3077 Copyright (c) 2015 BoxHill LLC */
window.EASYRECIPE=window.EASYRECIPE||{},function(e){"use strict";var t,i,n,a,l,s,r={},o={},c="ontouchend"in document;t={timeToTriggerRiver:150,minRiverAJAXDuration:200,riverBottomThreshold:5,keySensitivity:100,lastSearch:"",textarea:"",rename:function(i){i.each(function(){var i,n=e(this),a=this,l=n.children();l.length>0&&t.rename(l),a.id&&(i=a.id.match(/^wp-link(.*)$/),a.id=null!=i?"er-link"+i[1]:"er-"+a.id)})},init:function(){function a(){var t=e.trim(r.url.val());t&&l!==t&&!/^(?:[a-z]+:|#|\?|\.|\/)/.test(t)&&(r.url.val("http://"+t),l=t)}var c,d,u;s=EASYRECIPE,s.erLink=t,u=e("#wp-link-wrap"),c=u.clone(),t.rename(c),c.find("#search-results").attr("id","#er-search-results"),c.find("#most-recent-results").attr("id","#er-most-recent-results"),c.find("#query-notice-message").attr("id","#er-query-notice-message"),u.after(c),d=e("#wp-link-backdrop").clone(),d[0].id="er-link-backdrop",c.before(d),e("#easyrecipeUI").find(".ui-dialog.easyrecipeEntry").on("focusin",function(){r.url.focus()}),r.wrap=c,r.dialog=e("#er-link"),r.backdrop=d,r.submit=e("#er-link-submit"),r.close=e("#er-link-close"),r.text=e("#er-link-text"),r.url=e("#er-link-url"),r.nonce=e("#_ajax_linking_nonce"),r.openInNewTab=e("#er-link-target"),r.search=e("#er-link-search"),o.search=new n(e("#er-search-results")),o.recent=new n(e("#er-most-recent-results")),o.elements=r.dialog.find(".query-results"),r.queryNotice=e("#er-query-notice-message"),r.queryNoticeTextDefault=r.queryNotice.find(".query-notice-default"),r.queryNoticeTextHint=r.queryNotice.find(".query-notice-hint"),r.dialog.keydown(t.keydown),r.dialog.keyup(t.keyup),r.submit.click(function(e){e.preventDefault(),t.close(r.wrap)}),r.close.add(r.backdrop).add("#er-link-cancel a").click(function(e){e.preventDefault(),t.close()}),e("#er-link-search-toggle").on("click",t.toggleInternalLinking),o.elements.on("river-select",t.updateFields),r.search.on("focus.erlink",function(){r.queryNoticeTextDefault.hide(),r.queryNoticeTextHint.removeClass("screen-reader-text").show()}).on("blur.erlink",function(){r.queryNoticeTextDefault.show(),r.queryNoticeTextHint.addClass("screen-reader-text").hide()}),r.search.keyup(function(){var e=this;window.clearTimeout(i),i=window.setTimeout(function(){t.searchInternalLinks.call(e)},500)}),r.url.on("paste",function(){setTimeout(a,0)}),r.url.on("blur",a)},open:function(i){e(document.body).addClass("modal-open"),t.range=null,r.wrap.show(),r.backdrop.show(),o.search.refresh(),o.recent.refresh(),o.recent.ul.children().length||o.recent.ajax(),l="",r.url.val(l),r.submit.val(wpLinkL10n.update),r.text.val(i||""),r.wrap.addClass("has-text-field"),e(document).trigger("erlink-open",r.wrap),c?r.url.focus().blur():r.url.focus()[0].select()},close:function(t){e(document.body).removeClass("modal-open"),r.backdrop.hide(),r.wrap.hide(),l=!1,e(document).trigger("erlink-close",t)},updateFields:function(e,t){r.url.val(t.children(".item-permalink").val())},searchInternalLinks:function(){var i,n=e(this),a=n.val();if(a.length>2){if(o.recent.hide(),o.search.show(),t.lastSearch==a)return;t.lastSearch=a,i=n.parent().find(".spinner").addClass("is-active"),o.search.change(a),o.search.ajax(function(){i.removeClass("is-active")})}else o.search.hide(),o.recent.show()},next:function(){o.search.next(),o.recent.next()},prev:function(){o.search.prev(),o.recent.prev()},keydown:function(i){var n,a,l=e.ui.keyCode;l.ESCAPE===i.keyCode?(t.close(),i.stopImmediatePropagation()):l.TAB===i.keyCode&&(a=i.target.id,"er-link-submit"!==a||i.shiftKey?"er-link-close"===a&&i.shiftKey&&(r.submit.focus(),i.preventDefault()):(r.close.focus(),i.preventDefault())),(i.keyCode===l.UP||i.keyCode===l.DOWN)&&(!document.activeElement||"er-link-title-field"!==document.activeElement.id&&"er-url-field"!==document.activeElement.id)&&(n=i.keyCode===l.UP?"prev":"next",clearInterval(t.keyInterval),t[n](),t.keyInterval=setInterval(t[n],t.keySensitivity),i.preventDefault())},keyup:function(i){var n=e.ui.keyCode;(i.which===n.UP||i.which===n.DOWN)&&(clearInterval(t.keyInterval),i.preventDefault())},delayedCallback:function(e,t){var i,n,a,l;return t?(setTimeout(function(){return n?e.apply(l,a):void(i=!0)},t),function(){return i?e.apply(this,arguments):(a=arguments,l=this,void(n=!0))}):e},toggleInternalLinking:function(e){var t=r.wrap.hasClass("search-panel-visible");r.wrap.toggleClass("search-panel-visible",!t),setUserSetting("wplink",t?"0":"1"),r[t?"url":"search"].focus(),e.preventDefault()}},n=function(t,i){var n=this;this.element=t,this.ul=t.children("ul"),this.contentHeight=t.children("#er-link-selector-height"),this.waiting=t.find(".river-waiting"),this.change(i),this.refresh(),e("#er-link .query-results, #er-link #er-link-selector").scroll(function(){n.maybeLoad()}),t.on("click","li",function(t){n.select(e(this),t)})},e.extend(n.prototype,{refresh:function(){this.deselect(),this.visible=this.element.is(":visible")},show:function(){this.visible||(this.deselect(),this.element.show(),this.visible=!0)},hide:function(){this.element.hide(),this.visible=!1},select:function(e,t){var i,n,a,l;e.hasClass("unselectable")||e==this.selected||(this.deselect(),this.selected=e.addClass("selected"),i=e.outerHeight(),n=this.element.height(),a=e.position().top,l=this.element.scrollTop(),0>a?this.element.scrollTop(l+a):a+i>n&&this.element.scrollTop(l+a-n+i),this.element.trigger("river-select",[e,t,this]))},deselect:function(){this.selected&&this.selected.removeClass("selected"),this.selected=!1},prev:function(){var e;this.visible&&this.selected&&(e=this.selected.prev("li"),e.length&&this.select(e))},next:function(){var t;this.visible&&(t=this.selected?this.selected.next("li"):e("li:not(.unselectable):first",this.element),t.length&&this.select(t))},ajax:function(e){var i=this,n=1==this.query.page?0:t.minRiverAJAXDuration,a=t.delayedCallback(function(t,n){i.process(t,n),e&&e(t,n)},n);this.query.ajax(a)},change:function(e){this.query&&this._search==e||(this._search=e,this.query=new a(e),this.element.scrollTop(0))},process:function(t,i){var n="",a=!0,l="",s=1==i.page;t?e.each(t,function(){l=a?"alternate":"",l+=this.title?"":" no-title",n+=l?'<li class="'+l+'">':"<li>",n+='<input type="hidden" class="item-permalink" value="'+this.permalink+'" />',n+='<span class="item-title">',n+=this.title?this.title:wpLinkL10n.noTitle,n+='</span><span class="item-info">'+this.info+"</span></li>",a=!a}):s&&(n+='<li class="unselectable no-matches-found"><span class="item-title"><em>'+wpLinkL10n.noMatchesFound+"</em></span></li>"),this.ul[s?"html":"append"](n)},maybeLoad:function(){var e=this,i=this.element,n=i.scrollTop()+i.height();!this.query.ready()||n<this.contentHeight.height()-t.riverBottomThreshold||setTimeout(function(){var n=i.scrollTop(),a=n+i.height();!e.query.ready()||a<e.contentHeight.height()-t.riverBottomThreshold||(e.waiting.addClass("is-active"),i.scrollTop(n+e.waiting.outerHeight()),e.ajax(function(){e.waiting.removeClass("is-active")}))},t.timeToTriggerRiver)}}),a=function(e){this.page=1,this.allLoaded=!1,this.querying=!1,this.search=e},e.extend(a.prototype,{ready:function(){return!(this.querying||this.allLoaded)},ajax:function(t){var i=this,n={action:"wp-link-ajax",page:this.page,_ajax_linking_nonce:r.nonce.val()};this.search&&(n.search=this.search),this.querying=!0,e.post(ajaxurl,n,function(e){i.page++,i.querying=!1,i.allLoaded=!e,t(e,n)},"json")}}),e(document).ready(t.init)}(jQuery);